define(["jquery","core/config","core/str","core/log"],function(a,b,c,d){var e={init:function(){a(".tracker-events-prefs").bind("click",this.updatewatch),d.debug("AMD Tracker watch prefs initialized")},updatewatch:function(){var c=a(this),d=/(\d+)-(\d+)-(\w+)-(\w+)/,e=c.attr("id").match(d),f=e[1],g=e[2],h=e[3],i=e[4],j=b.wwwroot+"/mod/tracker/ajax/service.php";j+="?id="+f,j+="&what=updatewatch",j+="&ccid="+g,j+="&event="+h,j+="&state="+i,j+="&sesskey="+b.sesskey,a.get(j,function(){var b="#watch-"+h+"-"+g+"-img";1!=i?a(b).addClass("tracker-shadow"):a(b).removeClass("tracker-shadow");var d=i?0:1;c.attr("id",f+"-"+g+"-"+h+"-"+d)},"html")}};return e});