{"version":3,"file":"tracker_watches.min.js","sources":["../src/tracker_watches.js"],"sourcesContent":["/**\n *\n */\n// jshint undef:false, unused:false\n\ndefine(['jquery', 'core/config', 'core/str', 'core/log'], function($, cfg, str, log) {\n\n    var trackerwatches = {\n\n        init: function() {\n            $('.tracker-events-prefs').bind('click', this.updatewatch);\n\n            log.debug('AMD Tracker watch prefs initialized');\n        },\n\n        updatewatch : function() {\n\n            var that = $(this);\n            var regex = /(\\d+)-(\\d+)-(\\w+)-(\\w+)/;\n            var parts = that.attr('id').match(regex);\n            var cmid = parts[1];\n            var watchid = parts[2];\n            var event = parts[3];\n            var state = parts[4];\n\n            var url = cfg.wwwroot + '/mod/tracker/ajax/service.php';\n            url += '?id=' + cmid;\n            url += '&what=updatewatch';\n            url += '&ccid=' + watchid;\n            url += '&event=' + event;\n            url += '&state=' + state;\n            url += '&sesskey=' + cfg.sesskey;\n\n            $.get(url, function() {\n                var elmid = '#watch-' + event + '-' + watchid + '-img';\n                if (state != 1) {\n                    $(elmid).addClass('tracker-shadow');\n                } else {\n                    $(elmid).removeClass('tracker-shadow');\n                }\n                var nextstate = (state) ? 0 : 1;\n                that.attr('id', cmid + '-' + watchid + '-' + event + '-' + nextstate);\n            }, 'html');\n        }\n    };\n\n    return trackerwatches;\n});"],"names":["define","$","cfg","str","log","init","bind","this","updatewatch","debug","that","parts","attr","match","cmid","watchid","event","state","url","wwwroot","sesskey","get","elmid","addClass","removeClass","nextstate"],"mappings":"AAKAA,qCAAO,CAAC,SAAU,cAAe,WAAY,aAAa,SAASC,EAAGC,IAAKC,IAAKC,WAEvD,CAEjBC,KAAM,WACFJ,EAAE,yBAAyBK,KAAK,QAASC,KAAKC,aAE9CJ,IAAIK,MAAM,wCAGdD,YAAc,eAENE,KAAOT,EAAEM,MAETI,MAAQD,KAAKE,KAAK,MAAMC,MADhB,2BAERC,KAAOH,MAAM,GACbI,QAAUJ,MAAM,GAChBK,MAAQL,MAAM,GACdM,MAAQN,MAAM,GAEdO,IAAMhB,IAAIiB,QAAU,gCACxBD,KAAO,OAASJ,KAChBI,KAAO,oBACPA,KAAO,SAAWH,QAClBG,KAAO,UAAYF,MACnBE,KAAO,UAAYD,MACnBC,KAAO,YAAchB,IAAIkB,QAEzBnB,EAAEoB,IAAIH,KAAK,eACHI,MAAQ,UAAYN,MAAQ,IAAMD,QAAU,OACnC,GAATE,MACAhB,EAAEqB,OAAOC,SAAS,kBAElBtB,EAAEqB,OAAOE,YAAY,sBAErBC,UAAaR,MAAS,EAAI,EAC9BP,KAAKE,KAAK,KAAME,KAAO,IAAMC,QAAU,IAAMC,MAAQ,IAAMS,aAC5D,SAKd"}