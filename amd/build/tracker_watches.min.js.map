{"version":3,"sources":["../src/tracker_watches.js"],"names":["define","$","cfg","str","log","init","bind","updatewatch","debug","that","parts","attr","match","cmid","watchid","event","state","url","wwwroot","sesskey","get","elmid","addClass","removeClass","nextstate"],"mappings":"AAKAA,OAAM,+BAAC,CAAC,QAAD,CAAW,aAAX,CAA0B,UAA1B,CAAsC,UAAtC,CAAD,CAAoD,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAsBC,CAAtB,CAA2B,CAyCjF,MAvCqB,CAEjBC,IAAI,CAAE,eAAW,CACbJ,CAAC,CAAC,uBAAD,CAAD,CAA2BK,IAA3B,CAAgC,OAAhC,CAAyC,KAAKC,WAA9C,EAEAH,CAAG,CAACI,KAAJ,CAAU,qCAAV,CACH,CANgB,CAQjBD,WAAW,CAAG,sBAAW,IAEjBE,CAAAA,CAAI,CAAGR,CAAC,CAAC,IAAD,CAFS,CAIjBS,CAAK,CAAGD,CAAI,CAACE,IAAL,CAAU,IAAV,EAAgBC,KAAhB,CADA,yBACA,CAJS,CAKjBC,CAAI,CAAGH,CAAK,CAAC,CAAD,CALK,CAMjBI,CAAO,CAAGJ,CAAK,CAAC,CAAD,CANE,CAOjBK,CAAK,CAAGL,CAAK,CAAC,CAAD,CAPI,CAQjBM,CAAK,CAAGN,CAAK,CAAC,CAAD,CARI,CAUjBO,CAAG,CAAGf,CAAG,CAACgB,OAAJ,CAAc,+BAVH,CAWrBD,CAAG,EAAI,OAASJ,CAAhB,CACAI,CAAG,EAAI,mBAAP,CACAA,CAAG,EAAI,SAAWH,CAAlB,CACAG,CAAG,EAAI,UAAYF,CAAnB,CACAE,CAAG,EAAI,UAAYD,CAAnB,CACAC,CAAG,EAAI,YAAcf,CAAG,CAACiB,OAAzB,CAEAlB,CAAC,CAACmB,GAAF,CAAMH,CAAN,CAAW,UAAW,CAClB,GAAII,CAAAA,CAAK,CAAG,UAAYN,CAAZ,CAAoB,GAApB,CAA0BD,CAA1B,CAAoC,MAAhD,CACA,GAAa,CAAT,EAAAE,CAAJ,CAAgB,CACZf,CAAC,CAACoB,CAAD,CAAD,CAASC,QAAT,CAAkB,gBAAlB,CACH,CAFD,IAEO,CACHrB,CAAC,CAACoB,CAAD,CAAD,CAASE,WAAT,CAAqB,gBAArB,CACH,CACD,GAAIC,CAAAA,CAAS,CAAIR,CAAD,CAAU,CAAV,CAAc,CAA9B,CACAP,CAAI,CAACE,IAAL,CAAU,IAAV,CAAgBE,CAAI,CAAG,GAAP,CAAaC,CAAb,CAAuB,GAAvB,CAA6BC,CAA7B,CAAqC,GAArC,CAA2CS,CAA3D,CACH,CATD,CASG,MATH,CAUH,CApCgB,CAwCxB,CA1CK,CAAN","sourcesContent":["/**\n *\n */\n// jshint undef:false, unused:false\n\ndefine(['jquery', 'core/config', 'core/str', 'core/log'], function($, cfg, str, log) {\n\n    var trackerwatches = {\n\n        init: function() {\n            $('.tracker-events-prefs').bind('click', this.updatewatch);\n\n            log.debug('AMD Tracker watch prefs initialized');\n        },\n\n        updatewatch : function() {\n\n            var that = $(this);\n            var regex = /(\\d+)-(\\d+)-(\\w+)-(\\w+)/;\n            var parts = that.attr('id').match(regex);\n            var cmid = parts[1];\n            var watchid = parts[2];\n            var event = parts[3];\n            var state = parts[4];\n\n            var url = cfg.wwwroot + '/mod/tracker/ajax/service.php';\n            url += '?id=' + cmid;\n            url += '&what=updatewatch';\n            url += '&ccid=' + watchid;\n            url += '&event=' + event;\n            url += '&state=' + state;\n            url += '&sesskey=' + cfg.sesskey;\n\n            $.get(url, function() {\n                var elmid = '#watch-' + event + '-' + watchid + '-img';\n                if (state != 1) {\n                    $(elmid).addClass('tracker-shadow');\n                } else {\n                    $(elmid).removeClass('tracker-shadow');\n                }\n                var nextstate = (state) ? 0 : 1;\n                that.attr('id', cmid + '-' + watchid + '-' + event + '-' + nextstate);\n            }, 'html');\n        }\n    };\n\n    return trackerwatches;\n});"],"file":"tracker_watches.min.js"}