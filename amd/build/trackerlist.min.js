define("mod_tracker/trackerlist",["jquery","core/config","core/log","mod_tracker/bootstrap-select"],(function($,cfg,log,bootstrapselect){var moodletrackerlist={init:function(){$(".tracker-issue-edit-handle").bind("click",this.load_change_form),$("#modal-status-save").bind("click",this.submit_change_form),$(".tracker-quick-solve-buttons").bind("click",this.solve_issue),$("#tracker-quick-find-input").bind("change",this.quick_find),log.debug("AMD Tracker List initialized")},load_change_form:function(){var that=$(this),waiter='<div class="centered"><center><img id="detail-waiter" src="';waiter+=cfg.wwwroot+'/pix/i/ajaxloader.gif" /></center></div>',$("#issuelist-edit-inner-form").html(waiter);var id=that.attr("id").replace(/issue-edit-(.*?)-handle-/,""),mode=that.attr("data-mode"),ctx=that.attr("data-context"),url=cfg.wwwroot+"/mod/tracker/ajax/service.php";url+="?what=getmodalform",url+="&mode="+mode,url+="&id="+id,url+="&ctx="+ctx,$.get(url,(function(data){$("#issuelist-edit-inner-form").html(data),$("#modal-status-save").attr("data-issue",id),$("#modal-status-save").attr("data-purpose",mode),$(".selectpicker").selectpicker()}),"html")},submit_change_form:function(){var that=$(this),issueid=that.attr("data-issue"),purpose=that.attr("data-purpose"),url=cfg.wwwroot+"/mod/tracker/ajax/service.php";url+="?what=update"+purpose,url+="&id="+issueid,url+="&"+purpose+"="+$("#"+purpose+"-select-"+issueid).val(),$.get(url,(function(data){if("success"===data.result){if("status"==purpose){var oldclassname="status-"+moodletrackerlist.get_status_code(data.oldvalue);$(".issue-list-status-"+issueid).removeClass(oldclassname);var newclassname="status-"+moodletrackerlist.get_status_code(data.newvalue);$(".issue-list-status-"+issueid).addClass(newclassname)}$("#tracker-"+purpose+"-"+issueid).html(data.newlabel),$("#issuelist-edit-form").modal("hide")}}),"json")},get_status_code:function(statusix){return["posted","open","resolving","waiting","resolved","abandonned","transfered","testing","validated","published"][statusix]},solve_issue:function(){var that=$(this),issueid=that.attr("id").replace("resolve-",""),cmid=that.attr("data-cmid"),url=cfg.wwwroot+"/mod/tracker/view.php?id="+cmid;url+="&view=view",url+="&screen=mytickets",url+="&what=solve",url+="&issueid="+issueid,url+="&sesskey="+cfg.sesskey,window.location=url},quick_find:function(){$("#id-quick-find-form").submit()}};return moodletrackerlist}));

//# sourceMappingURL=trackerlist.min.js.map